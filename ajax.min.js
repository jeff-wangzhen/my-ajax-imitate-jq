var Ajax = {};
(function(d) {
    function c(f) {
        var i;
        var h;
        var j;
        if (window.XMLHttpRequest) {
            h = new XMLHttpRequest();
        } else {
            h = new ActiveXObject("Microsoft.XMLHTTP");
        }
        var g = { type: "GET", processData: true, contentType: "application/x-www-form-urlencoded" };
        f = a(g, f);
        if (f.contentType.replace(/(^\s*)|(\s*$)/g, "") === "application/json") {
            f.processData = false;
        }
        h = a(h, f.xhrFields);
        if (f.type.toUpperCase() === "GET") {
            i = e(a(b(f.url), f.data));
            if (f.url.indexOf("?") !== -1) {
                f.url = f.url.substr(0, f.url.indexOf("?"));
            }
            h.open("GET", f.url + "?" + i, true);
            h.send(null);
        } else {
            h.open(f.type.toUpperCase(), f.url, true);
            h.setRequestHeader("Content-type", f.contentType);
            if (f.processData) {
                i = e(f.data);
            } else {
                i = f.data;
            }
            h.send(i);
        }
        h.onreadystatechange = function() {
            var l = "";
            if (h.readyState === 4) {
                clearInterval(j);
                if ((h.status >= 200 && h.status < 300) || h.status === 304) {
                    if (h.status === 304) {
                        l = "notmodified";
                    } else {
                        l = "success";
                    }
                    try {
                        f.success(JSON.parse(h.responseText), l);
                    } catch (k) {
                        f.success(h.responseText, l);
                    }
                } else {
                    l = "error";
                    if (typeof f.error === "function") {
                        f.error(h, l);
                    }
                }
                if (typeof f.complete === "function") {
                    f.complete(h, l);
                }
            }
        };
        if (typeof f.timeout === "number") {
            j = setTimeout(function() {
                if (typeof f.error === "function") {
                    f.error(h, "timeout");
                    f.complete(h, "timeout");
                }
                if (typeof f.complete === "function") {
                    f.complete(h, "timeout");
                }
                h.abort();
            }, f.timeout);
        }
    }
    function a(i) {
        if (i == null) {
            throw new TypeError("Cannot convert undefined or null to object");
        }
        i = Object(i);
        for (var f = 1; f < arguments.length; f++) {
            var h = arguments[f];
            if (h != null) {
                for (var g in h) {
                    if (Object.prototype.hasOwnProperty.call(h, g)) {
                        i[g] = h[g];
                    }
                }
            }
        }
        return i;
    }
    function b(k) {
        var f = [];
        var l = k.split("?");
        f[0] = l[0];
        if (l[1]) {
            f[0] = l[1];
        }
        f = f[0].split("&");
        var n = {};
        var j = 0;
        var g;
        var h;
        var m;
        while (j < f.length) {
            g = f[j].split("=");
            h = g[0];
            m = g[1];
            n[h] = m;
            j++;
        }
        return n;
    }
    function e(k, o) {
        if (o === "undefined") {
            o = false;
        }
        var l = /\[\]$/,
            n = Object.prototype,
            j = Array.prototype,
            i = j.forEach,
            p = n.toString;
        function g(r) {
            return p.call(r) === "[object Function]";
        }
        function m(r) {
            return p.call(r) === "[object Array]";
        }
        function q(r) {
            return p.call(r) === "[object Object]";
        }
        function h(t, v, s, u) {
            var r;
            if (m(v)) {
                i.call(v, function(w, x) {
                    if (s || l.test(t)) {
                        u(t, w);
                    } else {
                        h(t + "[" + (typeof w === "object" && w != null ? x : "") + "]", w, s, u);
                    }
                });
            } else {
                if (!s && q(v)) {
                    for (r in v) {
                        h(t + "[" + r + "]", v[r], s, u);
                    }
                } else {
                    u(t, v);
                }
            }
        }
        function f(r, u) {
            var v,
                t = [],
                w = function(s, y) {
                    var x = g(y) ? y() : y;
                    t[t.length] = encodeURIComponent(s) + "=" + encodeURIComponent(x == null ? "" : x);
                };
            if (m(r)) {
                i.call(r, function(s) {
                    w(s.name, s.value);
                });
            } else {
                for (v in r) {
                    h(v, r[v], u, w);
                }
            }
            return t.join("&");
        }
        return f(k, o);
    }
    d = {
        get: function(f, g, h) {
            return c({ url: f, data: g, success: h });
        },
        post: function(f, g, h) {
            return c({ type: "POST", url: f, data: g, success: h });
        },
        ajax: c,
        param: e,
        urlorQuerytoObject: b,
        mergeObject: a
    };
    if (typeof window.$ === "undefined") {
        window.$ = d;
    }
})(Ajax);
